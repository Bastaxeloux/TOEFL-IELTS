<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Writing Task 2</title>
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>
        #timerValue {
            font-size: 36px !important;
        }
        .timer {
            min-width: 150px !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-logo-container">
            <img src="{{ url_for('static', filename='favicon.png') }}" alt="IELTS Logo" class="page-logo">
        </div>
        <h1>IELTS Writing Task 2</h1>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button id="practiceTab" class="tab-btn active">Practice</button>
            <button id="promptsTab" class="tab-btn">Manage Prompts</button>
        </div>

        <!-- Practice Tab -->
        <div id="practiceContent" class="tab-content active">
            <div class="task-instructions">
                <p><strong>Writing Task 2 (Essay):</strong> Present and justify an opinion, compare and contrast evidence, or evaluate and challenge ideas.</p>
                <p><strong>Time:</strong> 40 minutes | <strong>Minimum words:</strong> 250</p>
                <p><strong>Structure:</strong> Introduction → Body Paragraph 1 → Body Paragraph 2 (→ Body Paragraph 3) → Conclusion</p>
                <p><strong>Essay Types:</strong> Opinion, Discussion, Advantages/Disadvantages, Problem/Solution, Two Questions</p>
            </div>

            <div class="config-section">
                <div class="config-item">
                    <label for="apiKey">OpenAI API Key:</label>
                    <div class="api-key-input-group">
                        <input type="password" id="apiKey" placeholder="sk-..." value="{{ api_key }}">
                        <button id="saveApiKeyBtn" class="btn btn-success btn-compact">Save</button>
                    </div>
                </div>
            </div>

            <div class="button-container">
                <button id="startPractice" class="btn btn-primary btn-highlight">Start Practice</button>
                <button onclick="window.location.href='/'" class="btn btn-secondary">Back to Home</button>
            </div>

            <!-- Practice Area (hidden initially) -->
            <div id="practiceArea" style="display: none;">
                <!-- Essay Question -->
                <div class="current-prompt">
                    <h3>Essay Question:</h3>
                    <div id="essayQuestion" style="font-size: 17px; line-height: 1.7; padding: 20px; background: white; border: 1px solid #ddd;"></div>
                    <p style="margin-top: 10px;"><strong>Essay Type:</strong> <span id="essayType"></span></p>
                </div>

                <!-- Timer -->
                <div class="timer-container">
                    <div class="timer">
                        <span id="timerValue">40:00</span>
                    </div>
                    <div class="timer-label">Remaining Time</div>
                </div>

                <!-- Writing Area -->
                <div style="margin: 20px 0;">
                    <label for="writingArea"><strong>Your Essay:</strong></label>
                    <textarea id="writingArea" rows="20" style="width: 100%; padding: 15px; border: 2px solid #333; font-size: 15px; line-height: 1.6;" placeholder="Write your essay here..."></textarea>
                    <p><strong>Word count:</strong> <span id="wordCount">0</span> / 250</p>
                </div>

                <!-- AI Feedback -->
                <div id="feedbackContainer" style="display: none;" class="ai-feedback">
                    <h3>AI Feedback</h3>
                    <div id="feedbackContent" class="feedback-card"></div>
                </div>

                <!-- Action Buttons -->
                <div class="button-container">
                    <button id="startTimer" class="btn btn-warning">Start Timer</button>
                    <button id="getEvaluation" class="btn btn-success">Get AI Evaluation</button>
                    <button id="addToVocab" class="btn btn-secondary" style="display: none;">Add to Vocabulary</button>
                    <button id="newEssay" class="btn btn-primary">New Essay</button>
                </div>
            </div>
        </div>

        <!-- Prompts Management Tab -->
        <div id="promptsContent" class="tab-content">
            <div class="config-section">
                <h3>Add New Writing Task 2 Prompt</h3>
                <div class="config-item">
                    <label for="newPromptType">Essay Type:</label>
                    <select id="newPromptType" style="width: 100%; padding: 10px; border: 1px solid #ddd;">
                        <option value="opinion">Opinion (Agree/Disagree)</option>
                        <option value="discussion">Discussion (Both Views)</option>
                        <option value="advantages">Advantages and Disadvantages</option>
                        <option value="problem">Problem and Solution</option>
                        <option value="two_questions">Two Questions</option>
                    </select>
                </div>
                <div class="config-item">
                    <label for="newPromptQuestion">Essay Question:</label>
                    <textarea id="newPromptQuestion" rows="5" style="width: 100%; padding: 10px; border: 2px solid #333;" placeholder="Enter the essay question..."></textarea>
                </div>
                <div class="button-container">
                    <button id="addPrompt" class="btn btn-success">Add Prompt</button>
                </div>
            </div>

            <div class="config-section" style="margin-top: 30px;">
                <h3>Existing Prompts</h3>
                <div id="promptsList"></div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='writing_task2.js') }}"></script>
</body>
</html>
